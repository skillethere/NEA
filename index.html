<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firestore Data</title>
    <style>
        table {
            border-collapse: collapse;
            width: 100%;
        }

        th,
        td {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
        }

        th {
            background-color: #f2f2f2;
        }
    </style>
</head>

<body>

    <h2>Firestore Data</h2>
    <table id="data-table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Age</th>
                <th>Email</th>
            </tr>
        </thead>
        <tbody>
            <!-- Data will be populated here dynamically -->
        </tbody>
    </table>
    <script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-app.js"></script>
    <!-- FIREBASE FIRESTORE -->
    <script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-firestore.js"></script>
    <!-- FIREBASE ANALYTICS -->
    <script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-analytics.js"></script>
    <!-- FIREBASE CONFIG JS LINK-->
    <script type="module">
        // Import the functions you need from the SDKs you need
        // import { initializeApp, } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
        // import { getAnalytics, } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-analytics.js";
        // import {
        //     getFirestore, collection,
        //     doc,
        // } from 'https://www.gstatic.com/firebasejs/10.11.1/firebase-firestore.js'
        // // import {firebase} from ""
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyCkrHtKmYEOyVOdb-e-6qYJ2u1kjj--7q0",
            authDomain: "mayank-ffa0f.firebaseapp.com",
            projectId: "mayank-ffa0f",
            storageBucket: "mayank-ffa0f.appspot.com",
            messagingSenderId: "256445097873",
            appId: "1:256445097873:web:bacd02b4e273ed35ab9c30",
            measurementId: "G-F80PVZZBN4"
        };
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();

        var db = firebase.firestore();


        function fetchDataAndUpdateTable() {
            const tableBody = document.querySelector('#data-table tbody');
            tableBody.innerHTML = ''; // Clear previous data

            db.collection("test").get().then((querySnapshot) => {
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    const row = document.createElement('tr');
                    row.innerHTML = `<td>${data["50"]}</td><td>${data["51"]}</td><td>${data["60"]}</td>`;
                    tableBody.appendChild(row);
                });
            }).catch((error) => {
                console.error("Error getting documents: ", error);
            });
        }

        fetchDataAndUpdateTable(); // Initial fetch
        setInterval(fetchDataAndUpdateTable, 10000); // Fetch every 10 seconds
    </script>

</body>

</html>
